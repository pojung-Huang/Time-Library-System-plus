    <template>
        <div class="scroll-wrapper">
            <div class="library-card">
                <div class="title-row">
                    <!-- <img src="/images/libraryCard.jpg" alt="å€Ÿé–±è­‰åœ–ç‰‡" /> -->
                    <h1>å€Ÿé–±è­‰ç”³è«‹</h1>
                </div>
                <h1 class="section-title"> {{
                    step === 1 ? 'ç”³è¾¦èªªæ˜' :
                        step === 2 ? 'å€‹äººè³‡æ–™å¡«å¯«' :
                            step === 3 ? 'ç”³è«‹æˆåŠŸ' :
                                'é‡è¤‡ç”³è«‹è­¦å‘Š'
                }}</h1>

                <!-- æ­¥é©Ÿä¸€ï¼šç”³è«‹èªªæ˜ + åŒæ„è²æ˜ -->
                <div v-if="step === 1" class="instructions">
                    <ol>
                        <li>ç”³è¾¦å°è±¡ï¼šæœªæ›¾ç”³è¾¦éæœ¬é¤¨å€‹äººå€Ÿé–±è­‰ä¹‹ä¸­è¯æ°‘åœ‹åœ‹æ°‘åŠæŒæœ‰å±…ç•™è­‰ä¹‹éæœ¬åœ‹ç±è®€è€…</li>
                        <li>ä½¿ç”¨ç¯„åœï¼šå€Ÿé–±è­‰å¯å€Ÿç”¨æœ¬é¤¨å…§é¤¨è—è³‡æº(åœ–æ›¸ã€è¦–è½è³‡æ–™ã€é¤¨å…§è¨­å‚™ç­‰)ï¼Œä¸¦èƒ½ä½¿ç”¨æœ¬é¤¨æ‰€æœ‰ç·šä¸Šè³‡æºã€‚</li>
                        <li>é ˜å–ï¼šç¶²è·¯ç”³è«‹è¾¦è­‰å¾Œï¼Œè«‹æ–¼æœ¬é¤¨é–‹æ”¾æ™‚é–“å…§æ”œå¸¶èº«åˆ†è­‰æ˜æ–‡ä»¶è‡³æ«ƒå°é ˜å–ã€‚
                            <ul>
                                <li>ä¸­è¯æ°‘åœ‹åœ‹æ°‘æ‡‰æŒå€‹äººèº«åˆ†è­‰ã€é§•ç…§æˆ–æˆ¶å£åç°¿(æœªæ»¿åäºŒæ­²ä¹‹å…’ç«¥ç”±å®¶é•·æˆ–æ³•å®šç›£è­·äººæª¢å…·èº«åˆ†è­‰æ­£æœ¬åŠæˆ¶å£åç°¿æ­£æœ¬ä»£ç‚ºè¾¦ç†)ã€‚</li>
                                <li>éæœ¬åœ‹ç±äººå£«æŒè­·ç…§æˆ–å±…ç•™è­‰ã€‚</li>
                            </ul>
                        </li>
                        <li>å€Ÿé–±èªªæ˜ï¼šå€Ÿé–±è­‰æ¯äººé™è¾¦ä¹™å¼µï¼Œå€‹äººå€Ÿé–±è­‰å¯å€Ÿé–±åœ–æ›¸30å†Šã€æœŸåˆŠ5å†Šã€è¦–è½è³‡æ–™5ä»¶ï¼Œåœ–æ›¸ã€æœŸåˆŠå€ŸæœŸ30å¤©ï¼Œå¯çºŒå€Ÿå…©æ¬¡ã€‚æ¼«ç•«åŠè¦–è½è³‡æ–™å€ŸæœŸ14å¤©ï¼Œä¸å¾—çºŒå€Ÿã€‚</li>
                        <li>éºå¤±è£œç™¼ï¼š
                            <ul>
                                <li>æ›å¤±ç™»è¨˜ï¼šå€Ÿé–±è­‰å¦‚éºå¤±æ™‚ï¼Œæ‡‰ç«‹å³å‘æœ¬é¤¨è¾¦ç†æ›å¤±ç™»è¨˜ï¼Œè‹¥å› æœªæ›å¤±æˆ–è½‰å€Ÿè€Œç™¼ç”Ÿå†’ç”¨æƒ…äº‹ï¼Œæ‡‰è‡ªè¡Œè² è²¬ç›¸é—œè³ å„Ÿä¹‹è²¬ã€‚</li>
                                <li>éºå¤±è£œç™¼: æª¢å…·ç›¸é—œèº«åˆ†è­‰æ˜æ–‡ä»¶ï¼Œé ˆç¹³äº¤è¡Œæ”¿è¦è²»æ–°è‡ºå¹£åƒæ‹¾å…ƒæ•´(ç¹³ä»˜å·¥æœ¬è²»30å…ƒæ•´)ï¼Œç”³è«‹è£œç™¼</li>
                                <li>è®€è€…è³‡æ–™å¦‚æœ‰è®Šæ›´ï¼Œæ‡‰å³å‘æœ¬é¤¨è¾¦ç†ç•°å‹•æ‰‹çºŒã€‚</li>
                            </ul>
                        </li>
                    </ol>

                    <!-- <label class="consent">
                        <input type="checkbox" v-model="agreed" />
                        æˆ‘å·²é–±è®€ä¸¦åŒæ„ä»¥ä¸Šè²æ˜
                    </label> -->

                    <FormsConsentCheckbox v-model="agreed" />


                    <ButtonsStartForm :disabled="!agreed" @next="step = 2">
                        é–‹å§‹ç”³è«‹ç¶²è·¯è¾¦è­‰
                    </ButtonsStartForm>
                </div>

                <!-- âœ… æ­¥é©ŸäºŒï¼šç”³è«‹è¡¨å–® -->
                <form v-if="step === 2" @submit.prevent="submitForm" class="form">
                    <div class="form-group">
                        <label class="form-label">å§“åï¼š</label>
                        <input v-model="form.name" autocomplete="on" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">æ€§åˆ¥ï¼š</label>
                        <div class="gender-radio">
                            <label><input type="radio" value="ç”·" v-model="form.gender" required />ç”· Male</label>
                            <label><input type="radio" value="å¥³" v-model="form.gender" />å¥³ Female</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">èº«åˆ†è­‰å­—è™Ÿï¼š</label>
                        <input v-model="form.idNumber" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">å‡ºç”Ÿæ—¥æœŸï¼š</label>
                        <input v-model="form.birthDate" type="date" :max="today.toISOString().slice(0, 10)" required />
                        <div v-if="birthDateError" class="error-message">{{ birthDateError }}</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">åœ‹åˆ¥ï¼š</label>
                        <select v-model="form.nationality" required>
                            <option disabled value="">è«‹é¸æ“‡åœ‹åˆ¥</option>
                            <option v-for="country in countries" :key="country" :value="country">{{ country }}</option>
                        </select>
                    </div>

                    <div class="form-group education-row">
                        <label class="form-label">å­¸æ­·ï¼š</label>
                        <select v-model="form.education" required>
                            <option disabled value="">è«‹é¸æ“‡å­¸æ­·</option>
                            <option v-for="edu in filteredEducationOptions" :key="edu.value" :value="edu.value">
                                {{ edu.label }}
                            </option>
                        </select>
                    </div>


                    <div class="form-group">
                        <label class="form-label">è·æ¥­ï¼š</label>
                        <select v-model="form.occupation" required>
                            <option disabled value="">è«‹é¸æ“‡è·æ¥­</option>
                            <option v-for="job in filteredOccupations" :key="job" :value="job">
                                {{ job }}
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">é€šè¨Šåœ°å€ï¼š</label>
                        <div class="address-row">

                            <select v-model="form.addressCounty" required>
                                <option disabled value="">è«‹é¸æ“‡ç¸£å¸‚</option>
                                <option v-for="county in counties" :key="county" :value="county">{{ county }}</option>
                            </select>

                            <select v-model="form.addressTown" required>
                                <option disabled value="">è«‹é¸æ“‡é„‰é®</option>
                                <option v-for="town in towns" :key="town">{{ town }}</option>
                            </select>
                            <input type="text" v-model="form.addressZip" placeholder="éƒµéå€è™Ÿ Zip" required />
                        </div>
                        <div class="address-detail">
                            <input type="text" v-model="form.addressDetail" placeholder="åœ°å€ Address" required />
                        </div>
                    </div>


                    <div class="form-group">
                        <label class="form-label">é›»å­éƒµä»¶ï¼š</label>
                        <input v-model="form.email" type="email" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">è¯çµ¡é›»è©±ï¼š</label>
                        <input v-model="form.phone" type="tel" required />
                    </div>

                    <!-- å¯†ç¢¼è¨­å®šæ¬„ä½ -->
                    <div class="form-group">
                        <label class="form-label">è¨­å®šå¯†ç¢¼ï¼š</label>
                        <div class="password-wrapper">
                            <input :type="showPassword ? 'text' : 'password'" v-model="form.password" required
                                minlength="8" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$" title="è«‹è¼¸å…¥è‡³å°‘8ç¢¼ï¼ŒåŒ…å«å¤§å¯«ã€å°å¯«è‹±æ–‡èˆ‡æ•¸å­—"
                                placeholder="è«‹è¼¸å…¥è‡³å°‘8ç¢¼ï¼ŒåŒ…å«å¤§å¯«ã€å°å¯«è‹±æ–‡èˆ‡æ•¸å­—" />
                            <button type="button" @click="showPassword = !showPassword">ğŸ‘</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <ButtonsBackButton :step="step" @update:step="step = $event" />
                        <ButtonsSubmitButton>é€å‡ºç”³è«‹</ButtonsSubmitButton>
                        <ButtonsResetButton @reset="resetForm" />
                    </div>
                </form>

                <!-- æ­¥é©Ÿä¸‰ï¼šæˆåŠŸç•«é¢ -->
                <div v-if="step === 3" class="success-step">
                    <h2>âœ… ç”³è«‹æˆåŠŸï¼</h2>
                    <p>æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„ç”³è«‹ï¼Œå°‡ç›¡å¿«èˆ‡æ‚¨è¯çµ¡!</p>
                    <div v-if="loading" class="loading-spinner"></div>
                    <p v-if="loading">å³å°‡è¿”å›é¦–é ...</p>

                    <ButtonsGoHome v-if="!loading" />
                </div>

                <div v-if="step === 4" class="already-applied-step">
                    <h2>âš ï¸ æ‚¨å·²ç”³è«‹éå€Ÿé–±è­‰</h2>
                    <p>ç³»çµ±åˆ¤å®šæ‚¨å·²è¾¦ç†å€Ÿé–±è­‰ï¼Œè«‹å‹¿é‡è¤‡ç”³è«‹ã€‚å¦‚æœ‰ç–‘å•è«‹æ´½å®¢æœã€‚</p>
                    <ButtonsGoHome />
                </div>

            </div>

        </div>
    </template>

<script setup>
import { ref, reactive, watch, computed, onMounted } from 'vue'
import { parseISO, isAfter } from 'date-fns'
import { useRoute, useRouter } from 'vue-router'
import { useStepReset } from '@/composables/useStepReset'


const route = useRoute()
const router = useRouter()

const loading = ref(false)
const step = ref(1)
const agreed = ref(false)

const form = reactive({
    name: '',
    gender: '',
    idNumber: '',
    birthDate: '',
    nationality: '',
    education: '',
    occupation: '',
    addressCounty: '',
    addressTown: '',
    addressZip: '',
    addressDetail: '',
    email: '',
    phone: '',
    password: '',
})

const today = new Date()
const birthDateError = ref('')

watch(() => form.birthDate, (newDate) => {
    if (!newDate) {
        birthDateError.value = 'è«‹é¸æ“‡å‡ºç”Ÿæ—¥æœŸ'
    } else if (isAfter(parseISO(newDate), today)) {
        birthDateError.value = 'å‡ºç”Ÿæ—¥æœŸä¸èƒ½æ˜¯æœªä¾†'
    } else {
        birthDateError.value = ''
    }
})

const age = computed(() => {
    if (!form.birthDate) return null;
    const birth = new Date(form.birthDate);
    const now = new Date();
    let age = now.getFullYear() - birth.getFullYear();
    const monthDiff = now.getMonth() - birth.getMonth();
    if (monthDiff < 0 || (monthDiff === 0 && now.getDate() < birth.getDate())) {
        age--;
    }
    return age;
});

const educationOptions = [
    { value: 'å­¸é½¡å‰', label: 'å­¸é½¡å‰ Preschool' },
    { value: 'åœ‹å°', label: 'åœ‹å° Elementary' },
    { value: 'åœ‹ä¸­ (åˆä¸­)', label: 'åœ‹ä¸­ (åˆä¸­) Junior High School' },
    { value: 'é«˜ä¸­ (é«˜è·)', label: 'é«˜ä¸­ (é«˜è·) Senior High School' },
    { value: 'å°ˆç§‘', label: 'å°ˆç§‘ Junior College' },
    { value: 'å¤§å­¸', label: 'å¤§å­¸ University/College' },
    { value: 'ç¢©å£«', label: 'ç¢©å£« Master' },
    { value: 'åšå£«', label: 'åšå£« Doctor' },
    { value: 'å…¶ä»–', label: 'å…¶ä»– Other' }
]

const filteredEducationOptions = computed(() => {
    if (age.value === null) return []

    const all = educationOptions.map(e => e.value)
    const result = new Set()

    if (age.value < 6) {
        result.add('å­¸é½¡å‰')
    } else if (age.value < 12) {
        result.add('å­¸é½¡å‰')
        result.add('åœ‹å°')
    } else if (age.value < 15) {
        result.add('å­¸é½¡å‰')
        result.add('åœ‹å°')
        result.add('åœ‹ä¸­ (åˆä¸­)')
    } else if (age.value < 18) {
        result.add('å­¸é½¡å‰')
        result.add('åœ‹å°')
        result.add('åœ‹ä¸­ (åˆä¸­)')
        result.add('é«˜ä¸­ (é«˜è·)')
        result.add('å°ˆç§‘')
    } else if (age.value < 21) {
        result.add('å­¸é½¡å‰')
        result.add('åœ‹å°')
        result.add('åœ‹ä¸­ (åˆä¸­)')
        result.add('é«˜ä¸­ (é«˜è·)')
        result.add('å°ˆç§‘')
        result.add('å¤§å­¸')
    } else {
        // 21 æ­²ä»¥ä¸Šå¯é¸å…¨éƒ¨
        return educationOptions
    }

    return educationOptions.filter(e => result.has(e.value))
})


watch([age, () => form.education], () => {
    const valid = filteredEducationOptions.value.map(e => e.value)
    if (!valid.includes(form.education)) {
        form.education = ''
    }
})

const occupations = [
    'æœ¬åœ‹å­¸ç”Ÿ;åƒ‘ç”Ÿ Domestic Student / Overseas Chinese student',
    'å¤–ç±å­¸ç”Ÿ Foreign student',
    'ä¸­å°å­¸æ•™å¸« Primary or secondary school teacher',
    'å¤§å°ˆæ•™å¸«',
    'å…¬å‹™å“¡ Civil servant',
    'è»è­¦äººå“¡ Military Personnel / Police',
    'è‡ªç”±æ¥­ Freelancer',
    'æ–°èæ¥­ Journalist',
    'æ–‡åŒ–æ¥­ Cultural worker',
    'è¾²æ—æ¼ç‰§æ¥­ Agricultural, forestry, fishing or animal husbandry worker',
    'å·¥æ¥­ Industrial worker',
    'å•† Business worker',
    'é†«è—¥æ¥­ Medical worker',
    'ç¤¾æœƒåœ˜é«” Social group member',
    'ç¤¾æœƒå·¥ä½œè€… Social Worker',
    'å®—æ•™äº‹æ¥­ Religious Worker',
    'äº¤é€šäº‹æ¥­ Transport workers',
    'å®¶åº­ç®¡ç† Domestic worker',
    'é€€ä¼‘äººå“¡ Retired',
    'è·æ¥­(ç„¡) Not Employed'
]

const filteredOccupations = computed(() => {
    if (age.value <= 15) {
        return occupations.filter(o =>
            o.startsWith('æœ¬åœ‹å­¸ç”Ÿ;åƒ‘ç”Ÿ') || o.startsWith('å¤–ç±å­¸ç”Ÿ') || o.startsWith('è·æ¥­(ç„¡)')
        )
    }
    return occupations
})

watch([age, () => form.occupation], () => {
    if (age.value <= 15) {
        if (
            !form.occupation.startsWith('æœ¬åœ‹å­¸ç”Ÿ;åƒ‘ç”Ÿ') &&
            !form.occupation.startsWith('å¤–ç±å­¸ç”Ÿ') &&
            !form.occupation.startsWith('è·æ¥­(ç„¡)')
        ) {
            form.occupation = ''
        }
    }
})

const countries = [
    "ä¸­è¯æ°‘åœ‹ Republic of China",
    "ç¾åœ‹ United States of America",
    "åŠ æ‹¿å¤§ Canada",
    "è‹±åœ‹ United Kingdom",
    "æ³•åœ‹ France",
    "å¾·åœ‹ Germany",
    "æ—¥æœ¬ Japan",
    "å—éŸ“ South Korea",
    "é¦™æ¸¯ Hong Kong",
    "å°åº¦ Republic of India",
    "æ–°åŠ å¡ Singapore",
    "é¦¬ä¾†è¥¿äº Malaysia",
    "è¶Šå— Vietnam",
    "æ³°åœ‹ Thailand",
    "è²å¾‹è³“ The Philippines",
    "å°å°¼ Republic of Indonesia",
    "éæ´²å„åœ‹ African countries",
    "ä¸­ç¾æ´²å„åœ‹ Central American countries",
    "å—ç¾æ´²å„åœ‹ South American countries",
    "ä¿„ç¾…æ–¯ Russia",
    "ä¸­åœ‹ China",
    "æ­æ´²å„åœ‹ European countries",
    "ä¸­æ±å„åœ‹ Middle Eastern countries",
    "å…¶ä»– Other"
]

const counties = ref([])
const towns = ref([])

onMounted(async () => {
    try {
        const data = await $fetch('http://localhost:8080/api/zipcodes/counties')
        counties.value = data || []
        console.log('ç¸£å¸‚è³‡æ–™ï¼š', counties.value)
    } catch (error) {
        console.error('è¼‰å…¥ç¸£å¸‚å¤±æ•—ï¼š', error)
    }
})


watch(() => form.addressCounty, async (newCounty) => {
    if (!newCounty) return

    try {
        const data = await $fetch('http://localhost:8080/api/zipcodes/towns', {
            query: { county: newCounty }
        })
        towns.value = data || []
        form.addressTown = ''
        form.addressZip = ''
    } catch (error) {
        console.error('è¼‰å…¥é„‰é®å¤±æ•—ï¼š', error)
    }
})

watch(() => form.addressTown, async (newTown) => {
    if (!form.addressCounty || !newTown) return

    try {
        const data = await $fetch('http://localhost:8080/api/zipcodes/zip', {
            query: {
                county: form.addressCounty,
                town: newTown
            }
        })
        form.addressZip = data || ''
    } catch (error) {
        console.error('å–å¾—éƒµéå€è™Ÿå¤±æ•—ï¼š', error)
    }
})

const showPassword = ref(false)
const submitted = ref(false)

const submitForm = async () => {
    try {
        // å‘¼å«å¾Œç«¯ API
        await $fetch('http://localhost:8080/api/members/register', {
            method: 'POST',
            body: { ...form },
            credentials: 'include' // è‹¥å¾Œç«¯æœ‰è·¨åŸŸéœ€è¦ session å¯åŠ 
        })

        submitted.value = true
        step.value = 3 // é¡¯ç¤ºç”³è«‹æˆåŠŸç•«é¢
        clearSavedForm() //  æ¸…é™¤å„²å­˜è³‡æ–™
    } catch (error) {
        // åµæ¸¬æ˜¯å¦ç‚ºé‡è¤‡èº«åˆ†è­‰æˆ– email éŒ¯èª¤
        const message = error?.data || error?.message || 'ç”³è«‹å¤±æ•—'
        alert(`âŒ éŒ¯èª¤ï¼š${message}`)

        // é¡¯ç¤ºå·²ç”³è«‹éç•«é¢ï¼ˆå¯ä¾ç…§å¾Œç«¯è¨Šæ¯åˆ¤æ–·ï¼‰
        if (message.includes('èº«åˆ†è­‰') || message.includes('å·²è¢«è¨»å†Š')) {
            step.value = 4
        }
    }
}

// ä½¿ç”¨ useStepReset composable
useStepReset(step, resetForm)
function resetForm() {
    Object.assign(form, {
        name: '',
        gender: '',
        idNumber: '',
        birthDate: '',
        nationality: '',
        education: '',
        occupation: '',
        addressCounty: '',
        addressTown: '',
        addressZip: '',
        addressDetail: '',
        email: '',
        phone: '',
        password: ''
    })
    clearSavedForm() // åŒæ™‚æ¸…é™¤è¨˜æ†¶è³‡æ–™
}


// å¾ŒçºŒé» Sidebar åŒè·¯å¾‘å†æ¬¡è·³è½‰ä¹Ÿèƒ½ reset
watch(() => route.query.reset, (val) => {
    if (val === 'true') {
        step.value = 1
        resetForm()
        router.replace({ path: route.path })
    }
})



const FORM_STORAGE_KEY = 'libraryCardFormData'
const STEP2_FLAG_KEY = 'hasEnteredStep2Once'

//  è¡¨å–®è®Šæ›´æ™‚ï¼Œè‡ªå‹•å„²å­˜åˆ° localStorageï¼ˆåƒ…é™ step 2ï¼‰
watch(
    form,
    (newVal) => {
        if (step.value === 2) {
            localStorage.setItem(FORM_STORAGE_KEY, JSON.stringify(newVal))
        }
    },
    { deep: true }
)

//  æ¯æ¬¡é€²å…¥é é¢å°±æª¢æŸ¥ï¼ˆå°¤å…¶æ˜¯å¾å…¶ä»–é è·³å›ï¼‰
watch(step, (newStep) => {
    if (newStep === 2) {
        const hasShown = sessionStorage.getItem(STEP2_FLAG_KEY)
        const saved = localStorage.getItem(FORM_STORAGE_KEY)

        if (!hasShown && saved) {
            const shouldLoad = window.confirm('âš ï¸ åµæ¸¬åˆ°æ‚¨æœ‰å°šæœªå®Œæˆçš„ç”³è«‹è³‡æ–™ï¼Œè¦è¼‰å…¥ä¸Šæ¬¡å¡«å¯«çš„å…§å®¹å—ï¼Ÿ')
            if (shouldLoad) {
                try {
                    const parsed = JSON.parse(saved)
                    Object.assign(form, parsed)
                } catch (e) {
                    console.error('âš ï¸ è¼‰å…¥å¤±æ•—ï¼š', e)
                }
            } else {
                localStorage.removeItem(FORM_STORAGE_KEY)
            }

            sessionStorage.setItem(STEP2_FLAG_KEY, 'true')
        }
    }
})



function clearSavedForm() {
    localStorage.removeItem(FORM_STORAGE_KEY)
    sessionStorage.removeItem(STEP2_FLAG_KEY)
}


</script>

<style scoped>
.error-message {
    color: red;
    font-size: 0.9em;
    margin-top: 0.25rem;
}

.loading-spinner {
    border: 6px solid #f3f3f3;
    border-top: 6px solid #003366;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 1rem auto;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

.scroll-wrapper {
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.library-card {
    flex: 1;
    max-width: 1000px;
    /* max-height: 1000px; */
    margin: 3rem auto;
    padding: 0 10px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    /* width: 100%; */
    height: 100%;
    scrollbar-width: thin;
    /* for Firefox */
    scrollbar-color: transparent transparent;
}


/* æ»¾å‹•æ¢é è¨­ç‚ºé€æ˜ */
.library-card::-webkit-scrollbar {
    width: 8px;
}

.library-card::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 4px;
    transition: background-color 0.3s ease;
}

/* æ»‘é¼ é è¿‘ wrapper æ™‚é¡¯ç¤ºæ»¾å‹•æ¢ */
.scroll-wrapper:hover .library-card::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.4);
}

/* æ»‘é¼ é è¿‘æ™‚æ»¾å‹•æ¢èƒŒæ™¯ä¹Ÿé¡¯ç¤º */
.scroll-wrapper:hover .library-card {
    scrollbar-color: rgba(0, 0, 0, 0.4) transparent;
}




.title-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    /* åœ–ç‰‡èˆ‡æ–‡å­—é–“è· */
}

.title-row img {
    width: 50px;
    height: auto;
}

.title-row h1 {
    margin: 0;
    font-size: 2rem;
}

.section-title {
    position: relative;
    padding-left: 1rem;
    font-size: 1.5rem;
    font-weight: bold;
    padding: 0 1.5rem;
}

.section-title::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 6px;
    background-color: skyblue;
    /* æ©˜è‰² */
    border-radius: 2px;
}

.section-title::after {
    content: "";
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 6px;
    background-color: skyblue;
    border-radius: 2px;
}

.instructions li {
    margin-bottom: 0.5rem;
    /* è¡Œèˆ‡è¡Œä¹‹é–“çš„é–“è· */
    line-height: 2;
    /* æ–‡å­—è¡Œé«˜ */
    /* text-align: center; */
}

.instructions ul {
    padding-left: 1.5rem;
}

a {
    color: #007bff;
    text-decoration: underline;
}

a:hover {
    text-decoration: none;
}

.form {
    display: block;
    flex-direction: column;
    /* gap: 50px; */
    /* background-color: #0056b3; */
}


.form-group {
    display: flex;
    align-items: center;
    margin-bottom: 1.5rem;
    /* æ§åˆ¶æ¯åˆ—ä¹‹é–“çš„é–“è· */
    flex-wrap: wrap;
    /* å°è¢å¹•æ™‚å¯æ›è¡Œ */
}

.form-group label {
    min-width: 120px;
    /* çµ±ä¸€ label å¯¬åº¦ï¼Œå¯ä¾éœ€æ±‚èª¿æ•´ */
    font-weight: bold;
    margin-right: 12px;
    text-align: right;
    font-size: larger;
}

.form-group input,
.form-group select {
    flex: 1;
    padding: 8px;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
    min-width: 200px;
}

.form-group-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-left: 5rem;
    margin: 0 auto 2rem;
}

.education-row {
    display: flex;
    align-items: flex-start;
    margin-bottom: 1.5rem;
}

/* 
.form-label {
    width: 80px;
    font-weight: bold;
    margin-top: 0.3rem;
} */

.gender-radio {
    display: flex;
    /* gap: 2rem; */
    min-width: 100px;
    font-weight: bold
}

.education-options {
    display: grid;
    grid-template-columns: repeat(3, minmax(200px, 1fr));
    /* ä¸‰æ¬„æ’ç‰ˆ */
    gap: 1rem 2rem;
}

.education-options label {
    display: flex;
    align-items: center;
    text-align: center;
    gap: 6px;
}

.address-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8PX;
    margin-bottom: 0.5rem;
}

.address-row select,
.address-row input {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 1rem;
    min-width: 140px;
}

.address-detail {
    display: flex;
    /* width: fit-content; */
    width: 100%;
    /* margin-left: 0; */
    padding-left: 130px;
    /* é¿å…è¢«é ‚ä½ï¼Œ408 = 200 + 200 + 8 */
}

.address-detail input {
    width: 100%;
    max-width: calc(3 * 200px + 16px);
    /* å‡è¨­å‰é¢ä¸‰å€‹æ¬„ä½æ¯å€‹200pxï¼Œä¸­é–“gapç‚º8px*2 */
    padding: 8px;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
}

.password-wrapper {
    display: flex;
    align-items: center;
}

.password-wrapper input {
    flex: 1;
    width: 21rem;
}

.password-wrapper button {
    margin-left: 0.5rem;
    background: none;
    font-size: xx-large;
    border: none;
    cursor: pointer;
}


label {
    display: block;
    font-weight: bold;
    margin-bottom: 1rem;
    /* æ§åˆ¶å‚ç›´é–“è· */
}

input {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
}

.success-step {
    text-align: center;
    padding: 40px 20px;
}

.success-step h2 {
    color: green;
    font-size: 2rem;
    margin-bottom: 1rem;
}

.success-step p {
    font-size: 1.2rem;
    margin-bottom: 2rem;
}

.success-step button {
    padding: 10px 20px;
    background-color: #2563eb;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
}


.success {
    color: green;
    font-weight: bold;
}

.already-applied-step {
    background-color: #fff8e1;
    border: 1px solid #ffcc80;
    padding: 2rem;
    border-radius: 1rem;
    text-align: center;
    margin-top: 2rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.already-applied-step h2 {
    color: #e65100;
    font-size: 1.8rem;
    margin-bottom: 1rem;
}

.already-applied-step p {
    font-size: 1rem;
    color: #4e342e;
    margin-bottom: 1.5rem;
}

.already-applied-step button {
    background-color: #ff9800;
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.already-applied-step button:hover {
    background-color: #fb8c00;
}
</style>
